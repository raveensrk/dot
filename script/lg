#!/usr/bin/env bash

set -eo pipefail
IFS=$'\n\t'
# set -x

while true; do
	while read -u 10 -re line; do
		if [[ "$(uname)" == "Darwin" ]]; then
			gitui -d "${line/\~/$HOME}"
		else
			lazygit -p "${line/\~/$HOME}"
		fi
		echo "${line/\~/$HOME}"
	done 10<~/projects.txt
	[ "$1" != "loop" ] && break
	echo Looping...
	sleep 2
done
